name: derived_daily
version: 1.0
primary_key: [fecha, numero]
description: "Agregación diaria del motor derivado dinámico (score por número y trazas resumidas)."
fields:
  - {name: fecha, type: date, required: true}
  - {name: numero, type: string, format: "NN", domain: [00..99], required: true}
  - {name: score_derivado, type: number, min: 0, max: 1, required: true}
  - {name: oportunidades_total, type: integer, min: 0, required: true}
  - {name: activaciones_total, type: integer, min: 0, required: true}
  - {name: relaciones_activas, type: integer, min: 0, required: true}
  - {name: lags_activos, type: integer, min: 0, required: true}
  - {name: combinaciones_totales, type: integer, min: 0, required: true}
  - {name: detalle_derivado, type: string, required: true, description: "JSON con las combinaciones destacadas (top-N)."}
constraints:
  not_null: [[fecha, numero, score_derivado, oportunidades_total, activaciones_total, relaciones_activas, lags_activos]]
