# --- Postgres ---
PGUSER=admin
PGPASSWORD=admin
POSTGRES_DB=motor
# Puerto de exposición en host (evita conflicto con PostgreSQL local)
HOST_PGPORT=5432

# MLflow (driver psycopg2)
MLFLOW_BACKEND_STORE_URI=postgresql+psycopg2://admin:admin@postgres:5432/motor

# --- MinIO / S3 local ---
MINIO_ROOT_USER=admin
MINIO_ROOT_PASSWORD=changeme

# Buckets/prefixes para artefactos
DERIVED_DYNAMIC_BUCKET=motor-derived-dynamic
DERIVED_DYNAMIC_PREFIX=derived-dynamic
DERIVED_DAILY_BUCKET=motor-derived-daily
DERIVED_DAILY_PREFIX=derived-daily
CROSS_DAILY_BUCKET=motor-cross-daily
CROSS_DAILY_PREFIX=cross-daily
STRUCT_DAILY_BUCKET=motor-struct-daily
STRUCT_DAILY_PREFIX=struct-daily
FUSION_BUCKET=motor-fusion
FUSION_PREFIX=fusion
PREDICTIONS_BUCKET=motor-predictions
PREDICTIONS_PREFIX=predictions

# Credenciales S3 (MinIO)
AWS_ACCESS_KEY_ID=admin
AWS_SECRET_ACCESS_KEY=changeme
AWS_REGION=us-east-1
AWS_S3_FORCE_PATH_STYLE=true
# Endpoint S3/MinIO accesible desde los contenedores
S3_ENDPOINT=http://minio:9000
AWS_S3_ENDPOINT=http://minio:9000

# Endpoint S3 y tracking MLflow
MLFLOW_S3_ENDPOINT_URL=http://minio:9000
MLFLOW_DEFAULT_ARTIFACT_ROOT=s3://motor-artifacts/mlflow
MLFLOW_TRACKING_URI=http://mlflow:5000

# --- Prefect ---
PREFECT_API_URL=http://prefect:4200/api
PREFECT_API_DATABASE_CONNECTION_URL=postgresql+asyncpg://admin:admin@postgres:5432/prefect
PREFECT_WORK_POOL=default-process-pool
PREFECT_WORK_QUEUE=default
PREFECT_TIMEZONE=UTC
FUSION_WEIGHTS=0.4,0.3,0.3
PREFECT_RESULTS_PERSIST_BY_DEFAULT=true
PREFECT_RESULTS_STORAGE_BLOCK=s3/audit-results
PREFECT_RESULTS_DEFAULT_SERIALIZER=json

# Predicciones → Postgres
PREDICTIONS_DB_URL=postgresql+psycopg2://admin:admin@postgres:5432/motor
PREDICTIONS_DB_TABLE=predictions_daily
PREFECT_DEPLOYMENT_PATH=/opt/motor
AUDIT_RANDOMNESS_DIR=data/audit/randomness
